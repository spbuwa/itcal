<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Comprehensive Tax Calculator FY 2025-26</title>
    <style>
        :root {
            --primary-color: #2c3e50;
            --accent-color: #2980b9;
            --bg-color: #f0f2f5;
            --card-bg: #ffffff;
            --success-color: #27ae60;
            --warning-color: #e67e22;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--bg-color);
            color: #333;
            line-height: 1.6;
            margin: 0;
            padding: 20px;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
            background: var(--card-bg);
            padding: 40px;
            border-radius: 12px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.08);
        }

        h1 {
            color: var(--primary-color);
            text-align: center;
            margin-bottom: 10px;
        }
        
        p.subtitle {
            text-align: center;
            color: #666;
            margin-bottom: 40px;
        }

        h2 {
            color: var(--primary-color);
            font-size: 1.4rem;
            border-bottom: 2px solid #eee;
            padding-bottom: 10px;
            margin-top: 30px;
            margin-bottom: 20px;
        }

        /* Grid Layout for Inputs */
        .grid-section {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }

        .input-group {
            margin-bottom: 15px;
        }

        label {
            display: block;
            font-weight: 600;
            margin-bottom: 5px;
            color: #444;
            font-size: 0.9rem;
        }

        input[type="number"] {
            width: 100%;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 6px;
            font-size: 16px;
            transition: border 0.3s;
        }

        input[type="number"]:focus {
            border-color: var(--accent-color);
            outline: none;
            box-shadow: 0 0 0 3px rgba(41, 128, 185, 0.1);
        }

        .hint {
            font-size: 0.8rem;
            color: #7f8c8d;
            margin-top: 4px;
        }

        button {
            background-color: var(--primary-color);
            color: white;
            border: none;
            padding: 15px 40px;
            font-size: 1.1rem;
            border-radius: 8px;
            cursor: pointer;
            width: 100%;
            margin-top: 30px;
            transition: transform 0.2s, background 0.3s;
            font-weight: bold;
        }

        button:hover {
            background-color: #1a252f;
            transform: translateY(-2px);
        }

        /* Results Area */
        .results-container {
            display: none;
            margin-top: 40px;
            gap: 20px;
            flex-wrap: wrap;
        }

        .card {
            flex: 1;
            min-width: 320px;
            background: #fff;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            padding: 25px;
            position: relative;
        }

        .card-header {
            font-size: 1.2rem;
            font-weight: bold;
            color: var(--primary-color);
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid #f0f0f0;
        }

        .result-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 12px;
            font-size: 0.95rem;
        }

        .result-row.total-tax {
            border-top: 2px solid #eee;
            padding-top: 15px;
            margin-top: 15px;
            font-weight: bold;
            font-size: 1.3rem;
            color: var(--primary-color);
        }

        .recommendation-box {
            grid-column: 1 / -1;
            background-color: #fff3cd;
            color: #856404;
            padding: 20px;
            border-radius: 8px;
            border-left: 6px solid #ffc107;
            margin-bottom: 20px;
            display: none;
        }

        .badge-recommended {
            position: absolute;
            top: -12px;
            right: 20px;
            background: var(--success-color);
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: bold;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .highlight-green { color: var(--success-color); font-weight: bold; }
        .highlight-red { color: #c0392b; font-weight: bold; }

    </style>
</head>
<body>

<div class="container">
    <header>
        <h1>Comprehensive Tax Calculator</h1>
        <p class="subtitle">Financial Year 2025-26 | Assessment Year 2026-27</p>
    </header>

    <div id="recommendation" class="recommendation-box"></div>

    <div class="form-section">
        
        <h2>1. Salary & Property</h2>
        <div class="grid-section">
            <div class="input-group">
                <label>Gross Salary</label>
                <input type="number" id="salary" placeholder="Total Annual Salary">
            </div>
            <div class="input-group">
                <label>Other Taxable Income</label>
                <input type="number" id="other_income" placeholder="Exam fees, Guest Lectures etc.">
            </div>
        </div>

        <div class="grid-section" style="background: #f9f9f9; padding: 15px; border-radius: 8px; margin-top: 10px;">
            <div class="input-group">
                <label>Rental Income (Annual Rent Received)</label>
                <input type="number" id="rent_received" placeholder="Total rent from tenant">
            </div>
            <div class="input-group">
                <label>Housing Loan Interest (Rented Property)</label>
                <input type="number" id="rent_interest" placeholder="Interest paid on loan">
                <div class="hint">Loss set-off allowed only in Old Regime (Max 2L).</div>
            </div>
        </div>

        <h2>2. Capital Gains (Shares & Mutual Funds)</h2>
        <div class="grid-section">
            <div class="input-group">
                <label>Short Term Capital Gains (STCG)</label>
                <input type="number" id="stcg" placeholder="Equity held < 12 months">
                <div class="hint">Taxed flat @ 20%</div>
            </div>
            <div class="input-group">
                <label>Long Term Capital Gains (LTCG)</label>
                <input type="number" id="ltcg" placeholder="Equity held > 12 months">
                <div class="hint">Taxed flat @ 12.5% (Exempt up to ₹1.25L)</div>
            </div>
        </div>

        <h2>3. Income from Other Sources</h2>
        <div class="grid-section">
            <div class="input-group">
                <label>Book Royalty Income</label>
                <input type="number" id="royalty" placeholder="Gross Royalty">
                <div class="hint">Ded. u/s 80QQB (Old Regime only)</div>
            </div>
            <div class="input-group">
                <label>Dividend Income</label>
                <input type="number" id="dividend" placeholder="Taxed at slab rates">
            </div>
            <div class="input-group">
                <label>Savings Bank Interest</label>
                <input type="number" id="interest_savings" placeholder="SB Interest">
                <div class="hint">Ded. u/s 80TTA (Old Regime only)</div>
            </div>
            <div class="input-group">
                <label>FD / RD Interest</label>
                <input type="number" id="interest_fd" placeholder="Fixed/Recurring Deposit Interest">
            </div>
            <div class="input-group">
                <label>Taxable Maturity Proceeds</label>
                <input type="number" id="maturity" placeholder="e.g. LIC/Postal (if taxable)">
                <div class="hint">Leave blank if exempt u/s 10(10D)</div>
            </div>
        </div>

        <h2>4. Deductions (Old Regime Only)</h2>
        <div class="grid-section">
            <div class="input-group">
                <label>Sec 80C Investments</label>
                <input type="number" id="ded_80c" placeholder="LIC Premium, PPF, EPF etc.">
                <div class="hint">Max limit ₹1,50,000</div>
            </div>
            <div class="input-group">
                <label>Sec 80D Medical Insurance</label>
                <input type="number" id="ded_80d" placeholder="Premium paid">
                <div class="hint">Max ₹25k (Self) / ₹50k (Seniors)</div>
            </div>
            <div class="input-group">
                <label>Sec 80CCD(1B) NPS (Optional)</label>
                <input type="number" id="ded_nps" placeholder="National Pension System">
                <div class="hint">Max ₹50,000</div>
            </div>
        </div>

        <button onclick="calculate()">Calculate Tax Liability</button>
    </div>

    <div id="results" class="results-container">
        <div class="card" id="card-new">
            <div class="card-header">New Regime (FY 25-26)</div>
            <div class="result-row"><span>Gross Salary Income:</span> <span id="new-salary">0</span></div>
            <div class="result-row"><span>Std. Deduction:</span> <span>(-) ₹75,000</span></div>
            <div class="result-row"><span>House Prop. Income/Loss:</span> <span id="new-hp">0</span></div>
            <div class="result-row"><small style="color:red">Note: HP Loss set-off NOT allowed</small></div>
            <div class="result-row"><span>Other Sources:</span> <span id="new-other">0</span></div>
            <div class="result-row" style="border-top:1px dashed #ccc; padding-top:5px"><span><strong>Net Taxable Income:</strong></span> <span id="new-taxable">0</span></div>
            
            <br>
            <div class="result-row"><span>Tax on Normal Income:</span> <span id="new-tax-normal">0</span></div>
            <div class="result-row"><span>Tax on STCG (20%):</span> <span id="new-tax-stcg">0</span></div>
            <div class="result-row"><span>Tax on LTCG (12.5%):</span> <span id="new-tax-ltcg">0</span></div>
            <div class="result-row"><span>Rebate (87A):</span> <span id="new-rebate" class="highlight-green">0</span></div>
            <div class="result-row"><span>Cess (4%):</span> <span id="new-cess">0</span></div>
            <div class="result-row total-tax"><span>Total Tax:</span> <span id="new-total">0</span></div>
        </div>

        <div class="card" id="card-old">
            <div class="card-header">Old Regime</div>
            <div class="result-row"><span>Gross Salary Income:</span> <span id="old-salary">0</span></div>
            <div class="result-row"><span>Std. Deduction:</span> <span>(-) ₹50,000</span></div>
            <div class="result-row"><span>House Prop. Income/Loss:</span> <span id="old-hp">0</span></div>
            <div class="result-row"><small style="color:green">Note: HP Loss set-off allowed (Max 2L)</small></div>
            <div class="result-row"><span>Other Sources (Gross):</span> <span id="old-other-gross">0</span></div>
            
            <div style="background:#f9f9f9; padding:10px; border-radius:4px; margin:10px 0;">
                <div class="result-row"><span>Ded. 80C + 80CCD:</span> <span id="old-80c">0</span></div>
                <div class="result-row"><span>Ded. 80D (Medical):</span> <span id="old-80d">0</span></div>
                <div class="result-row"><span>Ded. 80QQB (Royalty):</span> <span id="old-qqb">0</span></div>
                <div class="result-row"><span>Ded. 80TTA (Interest):</span> <span id="old-tta">0</span></div>
            </div>

            <div class="result-row" style="border-top:1px dashed #ccc; padding-top:5px"><span><strong>Net Taxable Income:</strong></span> <span id="old-taxable">0</span></div>
            <br>
            <div class="result-row"><span>Tax on Normal Income:</span> <span id="old-tax-normal">0</span></div>
            <div class="result-row"><span>Tax on STCG (20%):</span> <span id="old-tax-stcg">0</span></div>
            <div class="result-row"><span>Tax on LTCG (12.5%):</span> <span id="old-tax-ltcg">0</span></div>
            <div class="result-row"><span>Rebate (87A):</span> <span id="old-rebate" class="highlight-green">0</span></div>
            <div class="result-row"><span>Cess (4%):</span> <span id="old-cess">0</span></div>
            <div class="result-row total-tax"><span>Total Tax:</span> <span id="old-total">0</span></div>
        </div>
    </div>
</div>

<script>
    const fmt = (num) => "₹" + Math.round(num).toLocaleString('en-IN');
    const val = (id) => parseFloat(document.getElementById(id).value) || 0;

    function calculate() {
        // --- 1. GATHER INPUTS ---
        const salary = val('salary');
        const otherTaxable = val('other_income');
        
        // Rental
        const rentReceived = val('rent_received');
        const rentInterest = val('rent_interest');
        const rentStdDed = rentReceived * 0.30;
        
        // Capital Gains
        const stcg = val('stcg');
        const ltcg = val('ltcg');

        // Other Sources
        const royalty = val('royalty');
        const dividend = val('dividend');
        const intSavings = val('interest_savings');
        const intFd = val('interest_fd');
        const maturity = val('maturity');

        // Deductions
        const ded80c = Math.min(val('ded_80c') + val('ded_nps'), 200000); // Simplification: 1.5L + 50k NPS
        const ded80d = val('ded_80d');

        // --- 2. COMMON CALCULATIONS ---
        
        // House Property Income (Raw)
        // Income = Rent - 30% - Interest
        let hpIncomeRaw = rentReceived - rentStdDed - rentInterest;
        
        // Other Sources Total (Before specific deductions)
        const incomeOtherSourcesRaw = otherTaxable + royalty + dividend + intSavings + intFd + maturity;

        // --- 3. NEW REGIME CALCULATION ---
        
        // A. Salary
        let newSalaryNet = Math.max(0, salary - 75000); // Std Deduction 75k
        
        // B. House Property
        // Rule: Loss CANNOT be set off against other heads.
        let newHpIncome = 0;
        if (hpIncomeRaw >= 0) {
            newHpIncome = hpIncomeRaw;
        } else {
            newHpIncome = 0; // Loss is ignored (cannot reduce salary)
        }

        // C. Total Normal Income
        let newGrossTotal = newSalaryNet + newHpIncome + incomeOtherSourcesRaw;
        let newTaxableNormal = newGrossTotal; // No Chapter VI-A deductions

        // D. Tax Calculation (New Regime Slabs)
        let newTaxNormal = calculateNewSlab(newTaxableNormal);

        // --- 4. OLD REGIME CALCULATION ---
        
        // A. Salary
        let oldSalaryNet = Math.max(0, salary - 50000); // Std Deduction 50k

        // B. House Property
        // Rule: Loss can be set off against other heads up to 2L.
        let oldHpIncome = 0;
        let oldHpLossSetOff = 0;
        
        if (hpIncomeRaw >= 0) {
            oldHpIncome = hpIncomeRaw;
        } else {
            // It is a loss
            // We can set off up to 2,00,000 against other income
            let loss = Math.abs(hpIncomeRaw);
            oldHpLossSetOff = Math.min(loss, 200000); // Amount to subtract from total
            oldHpIncome = -oldHpLossSetOff; // Represent as negative number for summing
        }

        // C. Specific Deductions (80QQB, 80TTA)
        let dedQQB = Math.min(royalty, 300000); // Max 3L
        let dedTTA = Math.min(intSavings, 10000); // Max 10k
        
        // D. Gross Total (Before Ch VI-A)
        let oldGrossTotal = oldSalaryNet + oldHpIncome + incomeOtherSourcesRaw;

        // E. Net Taxable (After Deductions)
        // Total Deductions = 80C + 80D + 80QQB + 80TTA
        let totalDeductions = ded80c + ded80d + dedQQB + dedTTA;
        
        // Restrict deductions to Gross Total (cannot make income negative)
        let oldTaxableNormal = Math.max(0, oldGrossTotal - totalDeductions);

        // F. Tax Calculation (Old Regime Slabs)
        let oldTaxNormal = calculateOldSlab(oldTaxableNormal);

        // --- 5. CAPITAL GAINS TAX (Common Logic applied to separate totals) ---
        // STCG Tax: 20%
        let taxSTCG = stcg * 0.20;
        
        // LTCG Tax: 12.5% on amount > 1.25L
        let ltcgTaxable = Math.max(0, ltcg - 125000);
        let taxLTCG = ltcgTaxable * 0.125;

        // --- 6. FINAL TOTALS & REBATES ---

        // NEW REGIME TOTAL
        let newTotalIncomeForRebate = newTaxableNormal + stcg + ltcg; 
        let newTotalTaxLiab = newTaxNormal + taxSTCG + taxLTCG;
        
        // Rebate 87A (New): If Total Income <= 12L, Tax is 0.
        // Note: Rebate usually doesn't apply to LTCG 112A, but applies to normal/STCG.
        // Simplified: If Income <= 12L, Rebate = Tax Payable (excluding LTCG 112A sometimes, but typically rebate covers up to limit).
        // Strict Rule: Rebate 87A New Regime is up to 60k if TI <= 12L.
        let newRebate = 0;
        if (newTotalIncomeForRebate <= 1200000) {
             newRebate = newTotalTaxLiab; // Simplify: Full rebate
        }
        let newFinalTax = Math.max(0, newTotalTaxLiab - newRebate);
        let newCess = newFinalTax * 0.04;
        let newGrandTotal = newFinalTax + newCess;

        // OLD REGIME TOTAL
        let oldTotalIncomeForRebate = oldTaxableNormal + stcg + ltcg;
        let oldTotalTaxLiab = oldTaxNormal + taxSTCG + taxLTCG;

        // Rebate 87A (Old): If Total Income <= 5L, Rebate up to 12.5k.
        let oldRebate = 0;
        if (oldTotalIncomeForRebate <= 500000) {
            oldRebate = Math.min(oldTotalTaxLiab, 12500);
        }
        let oldFinalTax = Math.max(0, oldTotalTaxLiab - oldRebate);
        let oldCess = oldFinalTax * 0.04;
        let oldGrandTotal = oldFinalTax + oldCess;

        // --- 7. DISPLAY ---
        document.getElementById('results').style.display = 'flex';
        document.getElementById('recommendation').style.display = 'block';

        // Fill New
        document.getElementById('new-salary').innerText = fmt(salary);
        document.getElementById('new-hp').innerText = fmt(newHpIncome);
        document.getElementById('new-other').innerText = fmt(incomeOtherSourcesRaw);
        document.getElementById('new-taxable').innerText = fmt(newTaxableNormal);
        document.getElementById('new-tax-normal').innerText = fmt(newTaxNormal);
        document.getElementById('new-tax-stcg').innerText = fmt(taxSTCG);
        document.getElementById('new-tax-ltcg').innerText = fmt(taxLTCG);
        document.getElementById('new-rebate').innerText = fmt(newRebate);
        document.getElementById('new-cess').innerText = fmt(newCess);
        document.getElementById('new-total').innerText = fmt(newGrandTotal);

        // Fill Old
        document.getElementById('old-salary').innerText = fmt(salary);
        document.getElementById('old-hp').innerText = fmt(oldHpIncome) + (oldHpIncome < 0 ? " (Loss Set-off)" : "");
        document.getElementById('old-other-gross').innerText = fmt(incomeOtherSourcesRaw);
        document.getElementById('old-80c').innerText = fmt(ded80c);
        document.getElementById('old-80d').innerText = fmt(ded80d);
        document.getElementById('old-qqb').innerText = fmt(dedQQB);
        document.getElementById('old-tta').innerText = fmt(dedTTA);
        document.getElementById('old-taxable').innerText = fmt(oldTaxableNormal);
        document.getElementById('old-tax-normal').innerText = fmt(oldTaxNormal);
        document.getElementById('old-tax-stcg').innerText = fmt(taxSTCG);
        document.getElementById('old-tax-ltcg').innerText = fmt(taxLTCG);
        document.getElementById('old-rebate').innerText = fmt(oldRebate);
        document.getElementById('old-cess').innerText = fmt(oldCess);
        document.getElementById('old-total').innerText = fmt(oldGrandTotal);

        // Recommendation
        const recBox = document.getElementById('recommendation');
        const badge = '<div class="badge-recommended">Recommended</div>';
        
        // Reset
        document.getElementById('card-new').classList.remove('recommended');
        document.getElementById('card-old').classList.remove('recommended');
        document.querySelectorAll('.badge-recommended').forEach(e => e.remove());

        if (newGrandTotal < oldGrandTotal) {
            let save = oldGrandTotal - newGrandTotal;
            recBox.innerHTML = `<strong>Option: New Regime is better.</strong> You save <strong>${fmt(save)}</strong>.`;
            recBox.style.borderLeftColor = "#27ae60";
            document.getElementById('card-new').classList.add('recommended');
            document.getElementById('card-new').insertAdjacentHTML('beforeend', badge);
        } else if (oldGrandTotal < newGrandTotal) {
            let save = newGrandTotal - oldGrandTotal;
            recBox.innerHTML = `<strong>Option: Old Regime is better.</strong> You save <strong>${fmt(save)}</strong>.<br><small>Primarily due to House Property Loss Set-off and Deductions.</small>`;
            recBox.style.borderLeftColor = "#27ae60";
            document.getElementById('card-old').classList.add('recommended');
            document.getElementById('card-old').insertAdjacentHTML('beforeend', badge);
        } else {
            recBox.innerHTML = `<strong>Both regimes result in the same tax.</strong>`;
        }
    }

    function calculateNewSlab(income) {
        // FY 25-26 New Regime Slabs
        let tax = 0;
        if (income > 2400000) {
            tax += (income - 2400000) * 0.30 + 400000*0.25 + 400000*0.20 + 400000*0.15 + 400000*0.10 + 400000*0.05;
        } else if (income > 2000000) {
            tax += (income - 2000000) * 0.25 + 400000*0.20 + 400000*0.15 + 400000*0.10 + 400000*0.05;
        } else if (income > 1600000) {
            tax += (income - 1600000) * 0.20 + 400000*0.15 + 400000*0.10 + 400000*0.05;
        } else if (income > 1200000) {
            tax += (income - 1200000) * 0.15 + 400000*0.10 + 400000*0.05;
        } else if (income > 800000) {
            tax += (income - 800000) * 0.10 + 400000*0.05;
        } else if (income > 400000) {
            tax += (income - 400000) * 0.05;
        }
        return tax;
    }

    function calculateOldSlab(income) {
        // Old Regime Slabs
        let tax = 0;
        if (income > 1000000) {
            tax += (income - 1000000) * 0.30 + 500000*0.20 + 250000*0.05;
        } else if (income > 500000) {
            tax += (income - 500000) * 0.20 + 250000*0.05;
        } else if (income > 250000) {
            tax += (income - 250000) * 0.05;
        }
        return tax;
    }
</script>

</body>
</html>